<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/polymerfire/polymerfire.html">
<link rel="import" href="../bower_components/neon-animation/neon-animatable-behavior.html">
<link rel="import" href="meetup-title.html">
<link rel="import" href="meetup-event.html">

<dom-module id="meetup-events">
	<template>

		<style>
			section {
				background-color: #a3cee9;
			}
		</style>

		<firebase-document
			id="events"
			app-name="meetup"
			data="{{data}}">
		</firebase-document>

		<firebase-query
			id="eventsQuery"
			app-name="meetup"
			path="/events"
			data="{{queryData}}">
		</firebase-query>

		<meetup-title title="Events"></meetup-title>

		<section>
			<div>These are events, made by [[myName]].</div>
			<input id="eventTitle" type="text">
			<input id="eventDetails" type="text">
			<button on-tap="submitInfo">Submit Info</button>
		</section>

		<section>
			<template is="dom-repeat" items="[[queryData]]" as="event">
				<meetup-event
					event-name="[[event.title]]"
					event-host="[[event.$key]]"
					event-image="[[event.details]]">
				</meetup-event>
			</template>
		</section>

	</template>
	<script>
		
	Polymer({

		is: 'meetup-events',

		behaviors: [Polymer.NeonAnimatableBehavior],

		properties: {
			myName: {
				type: String,
				value: 'Nick'
			},
			path: {
				type: String,
				notify: true
			},
			data: {
				type: Object
			}
		},

		submitInfo: function() {
			var self = this;

			self.data = {
				title: self.$.eventTitle.value,
				details: self.$.eventDetails.value
			};

			self.$.events.save('/events');
		}

	});

	</script>
</dom-module>