<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/polymerfire/polymerfire.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../bower_components/neon-animation/neon-animatable-behavior.html">
<link rel="import" href="meetup-title.html">
<link rel="import" href="meetup-event.html">
<link rel="import" href="meetup-new-event.html">

<dom-module id="meetup-events">
	<template>

		<style is="custom-style">
			section {
				@apply(--layout);
				@apply(--layout-wrap);
				@apply(--layout-center-justified);
			}

			paper-fab {
				--paper-fab-background: var(--secondary-color);
				--paper-fab-keyboard-focus-background: #104d82;
				position: fixed;
				bottom: 40px;
				right: 40px;
				z-index: 5;
			}
		</style>

		<firebase-document
			id="events"
			app-name="meetup"
			data="{{data}}">
		</firebase-document>

		<firebase-query
			id="eventsQuery"
			app-name="meetup"
			path="/events"
			data="{{queryData}}">
		</firebase-query>

		<meetup-title title="Events"></meetup-title>

		<section>
			<label for="title">Event Name:
				<input id="eventTitle" type="text" name="title">
			</label>
			<label for="image">Event Image:
				<input id="eventImage" type="text" name="image">
			</label>
			<label for="start">Event Start:
				<input id="eventStart" type="text" name="start">
			</label>
			<label for="end">Event End:
				<input id="eventEnd" type="text" name="end">
			</label>
			<label for="host">Event Host:
				<input id="eventHost" type="text" name="host">
			</label>
			<input type="submit" on-tap="submitInfo"></input>
		</section>

		<paper-fab icon="add" label="New Event" on-tap="openEditor"></paper-fab>

		<meetup-new-event id="editor"></meetup-new-event>

		<section>
			<template id="event" is="dom-repeat" items="[[queryData]]" as="event">
				<meetup-event
					event-name="[[event.title]]"
					event-host="[[event.host]]"
					event-image="[[event.image]]"
					event-start="[[event.start]]"
					event-end="[[event.end]]">
				</meetup-event>
			</template>
		</section>

	</template>
	<script>
		
	Polymer({

		is: 'meetup-events',

		behaviors: [Polymer.NeonAnimatableBehavior],

		properties: {
			myName: {
				type: String,
				value: 'Nick'
			},
			path: {
				type: String,
				notify: true
			},
			data: {
				type: Object
			}
		},

		submitInfo: function() {
			var self = this;

			self.data = {
				title: self.$.eventTitle.value,
				image: self.$.eventImage.value,
				host: self.$.eventHost.value
			};

			self.data.start = self.$.eventStart.value;
			self.data.end = self.$.eventEnd.value

			self.$.events.save('/events');
		},

		openEditor: function() {
			this.$.editor.open();
		}

	});

	</script>
</dom-module>